---
sidebar_position: 1
---
# Development Guide

## :paw_prints: First Steps
1. Create an account: [GitHub](https://github.com/)
2. Create an account: [Discord](https://discord.com/)
3. Sign the [CLA](https://www.arrowair.com/docs/contributing/cla)
4. Join the [Arrow Discord](https://discord.com/invite/arrow)
    - Be sure to visit the `#start-contributing` channel and give yourself a role!
5. Set up a GPG Key
    - See [Sign Your Commits](#lock_with_ink_pen-sign-your-commits) for instructions

## :carousel_horse: Workflow
### :round_pushpin: Claim a Task
1. Visit the [Arrow Dework](https://app.dework.xyz/arrow-air)
    - Sign in with your Discord credentials
3. View open tasks
    - ![Dework - Open Tasks](/images/opentasks_dework.png)
4. Claim a task, easy as a button click!
    - ![Dework - Claim Task](/images/dework_claim.png)
    - Some important tasks are by **application only**. Describe why you're a good fit for the task!

### :wrench: Work on a Task or Subtask
:exclamation: See our [Git Guidelines](#construction-git-guidelines)
1. Clone or fork the target repository.
    - If you are not a core member of an [Arrow GitHub team](https://github.com/orgs/Arrow-air/teams), you will need to work from a fork.
    - [How to Fork a Repository](https://docs.github.com/en/get-started/quickstart/fork-a-repo)
2. Create a branch.
    - Our branch names are generated by Dework! See our [branch guidelines](#deciduous_tree-branches).
3. Code!
    - Be sure to follow our [Code Style Guides](./style-guides/intro.md)!
4. :exclamation: **Sign** :exclamation: your changes and push to the remote.
    - Commits to all remote branches must be signed
    - See [Sign Your Commits](#lock_with_ink_pen-sign-your-commits) for instructions on setting up a GPG Key
    - Use the `-S` option to sign your commits
        - `git commit -S -m "Add README.md"`

### :checkered_flag: Push Changes
1. Make a pull request targeting the `develop` branch
    - A "Pull Request" is a public request to merge your branch into another branch
    - If making edits to the [website](https://github.com/Arrow-air/website/), seek to merge your PR into the website `staging` branch instead.
    - `main` is our latest stable release. `develop` is merged into `main` at the end of every release.
    - [How to create a pull request from a fork](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request-from-a-fork).
2. Confirm the presence of the `cla-signed` label.
    - If you haven't signed the [CLA](./../sign-cla.mdx), the cla-bot will be disappointed :angry:
3. Confirm that the GitHub Actions checks pass.
     - These checks will vary from repository to repository
     - ![GitHub - Checks](/images/github_checks.png)
4. Get approvals!
    - The number of approvals may vary from repo to repo.
    - Approvals generally need to come from core members of the [Arrow teams](https://github.com/orgs/Arrow-air/teams).
5. Merge!

## :zap: VS Code Extensions

These extensions are **recommended**:

### Generic
```bash
# In VS Code Quick Open (Ctrl+P)
ext install \
bierner.github-markdown-preview \
docsmsft.docs-yaml \
stkb.rewrap \
eamodio.gitlens \
ms-vscode-remote.vscode-remote-extensionpack \
tamasfe.even-better-toml \
EditorConfig.EditorConfig
```

- [GitHub Markdown Preview](https://marketplace.visualstudio.com/items?itemName=bierner.github-markdown-preview)
    - Includes `mermaid` (uml) rendering and emoji rendering in markdown preview pane
- [docs-yaml](https://marketplace.visualstudio.com/items?itemName=docsmsft.docs-yaml&ssr=false)
    - Intellisense, validation for YAML files
- [Rewrap](https://marketplace.visualstudio.com/items?itemName=stkb.rewrap)
    - Wrap code comments to fit within n characters
    - Need to enable this in Preferences->Settings->type "Rewrap"
    - 80 characters is the recommended column
- [GitLens](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens)
    - Hover over lines to see commit history, last author
- [Remote Development](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack)
    - For working over SSH
- [Even Better TOML](https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml)
    - TOML files are used for Rust configuration
    - Validation, syntax highlighting
- [EditorConfig](https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig)
    - Override user/workspace settings with settings found in `.editorconfig` files.

### Arrow Web projects
```bash
# In VS Code Quick Open (Ctrl+P)
ext install \
esbenp.prettier-vscode \
johnsoncodehk.volar

```

- [Prettier - Code formatter](https://open-vsx.org/extension/esbenp/prettier-vscode)
    - Auto formatting files based on .prettierrc.yaml config
- [Vue Language Features (Volar)](https://open-vsx.org/extension/Vue/volar)
    - Syntax highlighting for .vue files
    - Additional Vue development features
    - When formatting .vue files, choose prettier as the default instead!

### Arrow Terraform projects
```bash
# In VS Code Quick Open (Ctrl+P)
ext install \
4ops.terraform
```

- [Terraform](https://marketplace.visualstudio.com/items?itemName=4ops.terraform)
    - Syntax highlighting for `.tf` files


## :construction: Git Guidelines

### :deciduous_tree: Branches

Use the suggested [Dework Task](https://app.dework.xyz/arrow-air) branch name.

![Dework - Suggested Git Branch Name](/images/dework_branch.png)
- e.g. `am-smith/dw-227/rust-service-template`
- This links your work to a ticket
- Closing a pull request with this branch will also mark the Dework task as "Done"!
- Subtasks have their own branch names. Click on the subtask first to open up the subtask menu.

### :lock_with_ink_pen: Sign Your Commits

We enforce signed commits to authenticate commits from an author.
- Security, accountability, traceability
- ["How (and why) to sign Git commits" - Alessandro Segala](https://withblue.ink/2020/05/17/how-and-why-to-sign-git-commits.html)

:exclamation: All remote branches are protected from unsigned commits through
GitHub repository settings.

Setting up a GPG Key:
- [Generate a GPG
  Key](https://docs.github.com/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key)
- [Informing Git about your GPG Key](https://docs.github.com/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key)
- [Informing GitHub about your GPG Key](https://docs.github.com/en/authentication/managing-commit-signature-verification/adding-a-gpg-key-to-your-github-account)
- All commits signed by default: `git config --global commit.gpgsign true`

Add an `-S` to your commit command to sign it, e.g. `git commit -S -m "Add
README.md"`.

### :speech_balloon: Commit Messages

For most of the repositories, we've set up an auto-release process where commit
messages will be used to generate a CHANGELOG.md file and determine the new
release version.
This makes it extra important to use the correct messages when committing your
code.
Follow the guidelines as described below, which are based on [conventional commits](https://www.conventionalcommits.org/en/v1.0.0/).
```
<type>[(optional scope)]: <description>

[optional body]

[optional footer(s)]
```

- The title should start with a change `type` (lower case):
  - build -- Changes to build process, does not include code changes, results in ****Patch**** release
  - ci    -- Changes to CI process, does not include code changes, results in **Patch** release
  - docs  -- Changes to Docs / .md files, does not include code changes, results in **Patch** release
  - fix   -- Patches a bug, results in **Patch** release
  - perf  -- Performance fix, results in **Patch** release
  - refactor -- Code refactor changes, results in **Patch** release
  - style    -- Code / file formatting and style fixes, results in **Patch** release
  - test     -- Changes to Tests, results in **Patch** release
  - feat  -- Introduces a new feature, results in **Minor** release
- The title `description` should start lower case (**Add new feature**)
- Adding `!` after the `type` in the title, will indicate a breaking release.
  This results in a **Major** release. A BREAKING CHANGE notice
  can be added to the commit footer.

Additionally:
- Do not exceed a line length of 50 characters for commit title
- Do not exceed a line length of 72 characters for commit body
- Do **not** end the message with a period

Keep these in mind always, especially when squashing commits (one message).

### :+1: Pull Requests

- Pull Requests should target the `develop` branch
    - For the [website](https://github.com/Arrow-air/website) repository, target the `staging` branch
- Keep PRs small and easy to review!
    - Our [reviewers](./peer-review.md) may ask you to divide your PR into
      multiple smaller PRs.
- If the commit history is messy, recommend "Squash and Merge" when pushing in
  changes.
    - The squashed commit should have a thorough description of the changes
      added.
- The Pull Request comments should be descriptive
    - A brief description of what was changed and why
- Your PR should equate to no more than one Dework issue
    - Addressing multiple tickets in one merge makes it harder to debug breaking changes.
    - Use `git commit --fixup <commit sha>` to fix a previous commit. 


## :books: Repositories (Create, Modify, Delete)

Repositories are managed through [Terraform](https://www.terraform.io/).

Requests for repository management should be made to @owlot.


## :hammer: Makefile and build automation

All Arrow GitHub repositories are started from templates and are provisioned by Terraform to automate changes in the workflow.
Templates contain a Makefile which is propagated to all repositories.

Each repository has a Makefile which uses [make](https://www.gnu.org/software/make/manual/make.html) utility to run build targets.
All make targets call specific commands from a docker container [arrow-sanitychecks](https://ghcr.io/arrow-air/tools/arrow-sanitychecks).
arrow-sanitychecks is a docker image with linting tools needed to validate code so developers don't have to install them locally.
- they can be run separately - e.g. `make cspell-test`.
- or multiple targets can be run at once. This is done during pre-commit hooks or PR checks. - `make test`.
- or all targets to run test, build and release phases - `make all`.

### Makefile targets
Run `make help` to see all available targets or explore [template Makefile](https://github.com/Arrow-air/tf-github/blob/main/src/templates/all/Makefile)
and linked Makefiles.


## :closed_lock_with_key: Admin Access

Elevated access to our various team platforms is limited.

Ping @thomasg or @owlot and describe what you want to do.
